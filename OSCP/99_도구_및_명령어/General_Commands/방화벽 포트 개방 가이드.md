

# 방화벽 포트 개방 가이드 (Linux & Windows)

시스템을 장악한 후, 외부에서 해당 시스템으로 접속해야 하는 경우(예: 바인드 셸, 피버팅 서버 운영)가 있습니다. 이 가이드는 Linux와 Windows 환경에서 방화벽의 특정 포트를 개방하는 방법을 설명합니다.

---

### **1. Linux 환경**

Linux 배포판에 따라 주로 `firewalld` 또는 `ufw`를 사용합니다.

#### **Firewalld (CentOS/RHEL/Fedora 계열)**

```bash title="firewalld - 포트 개방"
# 1. 현재 방화벽 정책 확인
sudo firewall-cmd --list-all

# 2. 9000/tcp 포트를 영구적으로 허용 영역에 추가
sudo firewall-cmd --permanent --add-port=9000/tcp

# 3. 방화벽 정책 다시 로드하여 변경사항 적용
sudo firewall-cmd --reload
```

#### **UFW (Uncomplicated Firewall) (Debian/Ubuntu 계열)**

```bash title="ufw - 포트 개방"
# 1. ufw 활성화 상태 확인
sudo ufw status

# 2. 9000/tcp 포트 허용 규칙 추가
sudo ufw allow 9000/tcp

# 3. (필요시) ufw 활성화
sudo ufw enable
```

---

### **2. Windows 환경**

Windows에서는 `netsh` 내장 명령어를 사용하여 Windows Defender 방화벽 규칙을 관리할 수 있습니다.

```powershell title="netsh - 인바운드 규칙 추가"
# name: 규칙의 이름 (구분하기 쉽게 지정)
# dir: 방향 (in = 인바운드)
# action: 동작 (allow = 허용)
# protocol: 프로토콜 (TCP 또는 UDP)
# localport: 개방할 포트 번호
netsh advfirewall firewall add rule name="Allow Port 9000" dir=in action=allow protocol=TCP localport=9000
```

---

### **3. 포트 연결 테스트**

- **목표:** 규칙이 올바르게 적용되어 원격에서 해당 포트로 접근이 가능한지 확인합니다.

```bash title="Nmap으로 테스트 (공격자 머신)"
# -p: 테스트할 포트 지정
# -sT: TCP Connect 스캔
nmap -p 9000 -sT <target_ip>
```

```powershell title="PowerShell로 테스트 (원격 Windows 머신)"
Test-NetConnection -ComputerName <target_ip> -Port 9000
```
